(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-23bea46b"],{"628b":function(t,e,a){"use strict";a("9b33")},"9b33":function(t,e,a){},a55b:function(t,e,a){"use strict";a.r(e);var s=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"view-login"},[a("div",{staticStyle:{position:"absolute","z-index":"-999",height:"100%",width:"100%",background:"black",opacity:"0.5"}}),a("div",{staticClass:"view-login-background"},[a("div",{staticStyle:{display:"flex","flex-direction":"row","flex-wrap":"wrap"}},t._l(t.background_img_array,(function(t){return a("el-image",{key:t,staticClass:"view-login-background-img",attrs:{src:t,fit:"cover",lazy:""}})})),1),a("div",{staticStyle:{display:"flex","flex-direction":"row","flex-wrap":"wrap"}},t._l(t.background_img_array,(function(t){return a("el-image",{key:t,staticClass:"view-login-background-img",attrs:{src:t,fit:"cover"}})})),1)]),a("div",{staticClass:"login-content"},[a("div",{staticStyle:{color:"white","font-size":"64px"}},[t._v("PixivCool")]),a("el-form",{ref:"login-form",attrs:{model:t.form_data,rules:t.rules}},[a("el-card",{staticClass:"login-content-card",attrs:{"body-style":"display: flex;flex-direction: column;"}},[a("el-form-item",{attrs:{prop:"username"}},[a("el-input",{staticClass:"login-content-card-item",attrs:{placeholder:"pixiv ID或邮箱",clearable:""},model:{value:t.form_data.username,callback:function(e){t.$set(t.form_data,"username",e)},expression:"form_data.username"}})],1),a("el-form-item",{attrs:{prop:"password"}},[a("el-input",{staticClass:"login-content-card-item",attrs:{placeholder:"密码","show-password":""},model:{value:t.form_data.password,callback:function(e){t.$set(t.form_data,"password",e)},expression:"form_data.password"}})],1),a("el-button",{staticClass:"login-content-card-item",attrs:{type:"primary","native-type":"submit"},on:{click:t.formPost}},[t._v("登陆 ")]),a("el-button",{staticClass:"login-content-card-item",attrs:{type:"success"}},[t._v("未持有账号的用户请点这里")])],1)],1)],1)])},i=[],r={name:"Login",data(){return{background_img_array:[],form_data:{username:"",password:""},rules:{username:[{required:!0,message:"请输入pixiv ID或邮箱",trigger:"blur"}],password:[{required:!0,message:"请输入密码",trigger:"blur"}]},loading:!1}},mounted(){this.$http.get(this.pixiv.URL_APP_API+"/v1/walkthrough/illusts").then(t=>{let e=this._.get(t,"data.illusts");0!==e.length&&e.map((t,e)=>{this._.get(t,"image_urls.square_medium")&&this.background_img_array.length<60&&this.background_img_array.push(this._.get(t,"image_urls.square_medium"))})})},methods:{formPost(){this.$refs["login-form"].validate(t=>{t&&this.login()})},login(){this.$loading({lock:!0,text:"登录中"});let t={client_id:"MOBrBDS8blbauoSck0ZfDbtuzpyT",client_secret:"lsACyCD94FhDUtGTXi3QzcFE2uU1hqtDaKeqrdwj",grant_type:"password",username:this.form_data.username,password:this.form_data.password,device_token:"pixiv",get_secure_url:!0,include_policy:!0};this.$http.post(this.pixiv.URL_OAUTH+"/auth/token",t).then(t=>{this.$loading().close();let e=this._.get(t,"data.response");e&&(this.app.setUser(e),0!==this.app.firstRouter.indexOf("/login")&&(this.app.firstRouter="/"),this.$router.replace(this.app.firstRouter).catch(t=>t))}).catch(t=>{this.$loading().close();let e=this._.get(t,"response.data.errors.system.message");e&&this.$alert(e,"登陆错误",{confirmButtonText:"我知道了",type:"error",showClose:!1,closeOnClickModal:!1})})}}},o=r,l=(a("628b"),a("2877")),n=Object(l["a"])(o,s,i,!1,null,"01712cda",null);e["default"]=n.exports}}]);
//# sourceMappingURL=chunk-23bea46b.6d3ce940.js.map