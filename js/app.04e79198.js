(function(e){function t(t){for(var n,o,s=t[0],u=t[1],c=t[2],l=0,d=[];l<s.length;l++)o=s[l],Object.prototype.hasOwnProperty.call(a,o)&&a[o]&&d.push(a[o][0]),a[o]=0;for(n in u)Object.prototype.hasOwnProperty.call(u,n)&&(e[n]=u[n]);h&&h(t);while(d.length)d.shift()();return i.push.apply(i,c||[]),r()}function r(){for(var e,t=0;t<i.length;t++){for(var r=i[t],n=!0,o=1;o<r.length;o++){var s=r[o];0!==a[s]&&(n=!1)}n&&(i.splice(t--,1),e=u(u.s=r[0]))}return e}var n={},o={app:0},a={app:0},i=[];function s(e){return u.p+"js/"+({}[e]||e)+"."+{"chunk-2d22d746":"8324b352","chunk-c22eb766":"8d2ed3fd"}[e]+".js"}function u(t){if(n[t])return n[t].exports;var r=n[t]={i:t,l:!1,exports:{}};return e[t].call(r.exports,r,r.exports,u),r.l=!0,r.exports}u.e=function(e){var t=[],r={"chunk-c22eb766":1};o[e]?t.push(o[e]):0!==o[e]&&r[e]&&t.push(o[e]=new Promise((function(t,r){for(var n="css/"+({}[e]||e)+"."+{"chunk-2d22d746":"31d6cfe0","chunk-c22eb766":"7393793c"}[e]+".css",a=u.p+n,i=document.getElementsByTagName("link"),s=0;s<i.length;s++){var c=i[s],l=c.getAttribute("data-href")||c.getAttribute("href");if("stylesheet"===c.rel&&(l===n||l===a))return t()}var d=document.getElementsByTagName("style");for(s=0;s<d.length;s++){c=d[s],l=c.getAttribute("data-href");if(l===n||l===a)return t()}var h=document.createElement("link");h.rel="stylesheet",h.type="text/css",h.onload=t,h.onerror=function(t){var n=t&&t.target&&t.target.src||a,i=new Error("Loading CSS chunk "+e+" failed.\n("+n+")");i.code="CSS_CHUNK_LOAD_FAILED",i.request=n,delete o[e],h.parentNode.removeChild(h),r(i)},h.href=a;var p=document.getElementsByTagName("head")[0];p.appendChild(h)})).then((function(){o[e]=0})));var n=a[e];if(0!==n)if(n)t.push(n[2]);else{var i=new Promise((function(t,r){n=a[e]=[t,r]}));t.push(n[2]=i);var c,l=document.createElement("script");l.charset="utf-8",l.timeout=120,u.nc&&l.setAttribute("nonce",u.nc),l.src=s(e);var d=new Error;c=function(t){l.onerror=l.onload=null,clearTimeout(h);var r=a[e];if(0!==r){if(r){var n=t&&("load"===t.type?"missing":t.type),o=t&&t.target&&t.target.src;d.message="Loading chunk "+e+" failed.\n("+n+": "+o+")",d.name="ChunkLoadError",d.type=n,d.request=o,r[1](d)}a[e]=void 0}};var h=setTimeout((function(){c({type:"timeout",target:l})}),12e4);l.onerror=l.onload=c,document.head.appendChild(l)}return Promise.all(t)},u.m=e,u.c=n,u.d=function(e,t,r){u.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:r})},u.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},u.t=function(e,t){if(1&t&&(e=u(e)),8&t)return e;if(4&t&&"object"===typeof e&&e&&e.__esModule)return e;var r=Object.create(null);if(u.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var n in e)u.d(r,n,function(t){return e[t]}.bind(null,n));return r},u.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return u.d(t,"a",t),t},u.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},u.p="https://cdn.jsdelivr.net/gh/mouyase/PixivCool@gh-pages/",u.oe=function(e){throw console.error(e),e};var c=window["webpackJsonp"]=window["webpackJsonp"]||[],l=c.push.bind(c);c.push=t,c=c.slice();for(var d=0;d<c.length;d++)t(c[d]);var h=l;i.push([0,"chunk-vendors"]),r()})({0:function(e,t,r){e.exports=r("56d7")},"034f":function(e,t,r){"use strict";r("85ec")},"56d7":function(e,t,r){"use strict";r.r(t);var n=r("2b0e"),o=r("8c4f"),a=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{staticClass:"view-home"},[r("div",[r("VirtualCollection",{directives:[{name:"infinite-scroll",rawName:"v-infinite-scroll",value:e.loadData,expression:"loadData"}],attrs:{cellSizeAndPositionGetter:e.cellSizeAndPositionGetter,collection:e.items,height:947,width:e.image_row*e.image_width},scopedSlots:e._u([{key:"cell",fn:function(e){return[r("el-image",{staticClass:"view-home-recommend-img",attrs:{src:e.data.image_urls.medium,fit:"cover"}},[r("div",{staticStyle:{width:"100%",height:"100%"},attrs:{slot:"placeholder"},slot:"placeholder"})])]}}])})],1)])},i=[],s={name:"Home",data(){return{image_recommend_array:[],image_width:300,image_row:4,next_url:"",is_loading:!1}},mounted(){},computed:{items(){const e=+this.image_recommend_array.length,t=+this.image_row,r=new Array(t).fill(0);return new Array(e).fill(1).map((e,n)=>{const o=n%t,a=this.image_width,i=parseInt(a/this.image_recommend_array[n].width*this.image_recommend_array[n].height),s={data:this.image_recommend_array[n],width:a,height:i,x:o*a,y:r[o]};return r[o]+=i,s})}},methods:{cellSizeAndPositionGetter(e,t){const{data:r,...n}=e;return n},loadData(){if(!this.is_loading){this.is_loading=!0;let e=this.next_url?this.next_url:this.pixiv.URL_APP_API+"/v1/illust/recommended",t={filter:"for_android",include_ranking_illusts:!1,include_privacy_policy:!0};this.$http.get(e,{params:t}).then(e=>{this.is_loading=!1;let t=this._.get(e,"data.illusts");this.next_url=this._.get(e,"data.next_url"),0!==t.length&&t.map(e=>{this._.get(e,"image_urls.medium")&&this._.get(e,"sanity_level")<=2&&this.image_recommend_array.push(e)})}).catch(e=>{this.is_loading=!1})}}}},u=s,c=(r("8f66"),r("2877")),l=Object(c["a"])(u,a,i,!1,null,"34537879",null),d=l.exports;n["default"].use(o["a"]);const h=[{path:"/",name:"Home",component:d},{path:"/login",name:"Login",component:()=>r.e("chunk-c22eb766").then(r.bind(null,"a55b"))},{path:"/about",name:"About",component:()=>r.e("chunk-2d22d746").then(r.bind(null,"f820"))}],p=new o["a"]({routes:h});var f=p,g=r("5c96"),m=r.n(g),_=(r("0fae"),function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{attrs:{id:"app"}},[r("router-view")],1)}),v=[],y={name:"App",components:{},data(){return{}},created(){this.app.firstRouter=location.hash.slice(1),console.log("初次打开路由",this.app.firstRouter),this.app.isLogin()||(this.app.firstRouter="login"),this.$router.replace(this.app.firstRouter).catch(e=>e)},beforeMount(){},mounted(){}},b=y,w=(r("034f"),Object(c["a"])(b,_,v,!1,null,null,null)),S=w.exports,C=r("bc3a"),x=r.n(C),k=r("4328"),A=r.n(k),P={firstRouter:"/",setUser(e){localStorage.setItem("user_data",JSON.stringify(e))},getUser(){return JSON.parse(localStorage.getItem("user_data"))},isLogin(){return!!this.getUser()}},O={URL_APP_API:"https://app-api.128512.xyz",URL_OAUTH:"https://oauth.128512.xyz"},U=r("2ef0"),j=r.n(U);let L=R(),E=M(L+"28c1fdd170a5204386cb1313c7077b34f83e4aaf4aa829ce78c231e05b0bae2c"),T=!1,D=[],z=x.a.create({headers:{"Content-Type":"application/x-www-form-urlencoded; charset=UTF-8","accept-language":"zh_CN","app-os":"android","app-os-version":"9","app-version":"5.0.200","x-client-time":L,"x-client-hash":E}});z.interceptors.request.use(e=>("post"===e.method&&(e.data=A.a.stringify(e.data)),P.getUser()&&(e.headers.authorization="Bearer "+P.getUser().access_token),e),e=>Promise.reject(e)),z.interceptors.response.use(e=>e&&e.data?(e.data=JSON.parse(JSON.stringify(e.data).replace(/i\.pximg\.net/g,"i.pixiv.cat")),Promise.resolve(e)):Promise.reject(e),e=>{if(e&&e.response&&e.response.status){if(0!==String(j.a.get(e,"response.error.message")).indexOf("Error occurred at the OAuth process.")){let t=e.response.config;if(T)return new Promise(e=>{D.push(r=>{t.baseURL="",t.headers.authorization="Bearer "+r,e(z(t))})});{T=!0;let e={client_id:"MOBrBDS8blbauoSck0ZfDbtuzpyT",client_secret:"lsACyCD94FhDUtGTXi3QzcFE2uU1hqtDaKeqrdwj",grant_type:"refresh_token",refresh_token:P.getUser().refresh_token,device_token:"pixiv",get_secure_url:!0,include_policy:!0};return z.post(O.URL_OAUTH+"/auth/token",e).then(e=>{let r=j.a.get(e,"data.response");if(r)return P.setUser(r),t.headers.authorization="Bearer "+r.access_token,t.baseURL="",D.forEach(e=>e(r.access_token)),D=[],z(t)}).catch(e=>{console.error("Login error",e),window.location.href="/#/login"}).finally(()=>{T=!1})}}return console.log(e),Promise.reject(e.response)}});var N=z;function R(){let e=new Date;return B(e.getFullYear())+"-"+B(e.getMonth()+1)+"-"+B(e.getDate())+"T"+B(e.getHours())+":"+B(e.getMinutes())+":"+B(e.getSeconds())+"+08:00"}function B(e){return e<10?"0"+String(e):String(e)}function M(e){function t(e,t){return e<<t|e>>>32-t}function r(e,t){var r,n,o,a,i;return o=2147483648&e,a=2147483648&t,r=1073741824&e,n=1073741824&t,i=(1073741823&e)+(1073741823&t),r&n?2147483648^i^o^a:r|n?1073741824&i?3221225472^i^o^a:1073741824^i^o^a:i^o^a}function n(e,t,r){return e&t|~e&r}function o(e,t,r){return e&r|t&~r}function a(e,t,r){return e^t^r}function i(e,t,r){return t^(e|~r)}function s(e,o,a,i,s,u,c){return e=r(e,r(r(n(o,a,i),s),c)),r(t(e,u),o)}function u(e,n,a,i,s,u,c){return e=r(e,r(r(o(n,a,i),s),c)),r(t(e,u),n)}function c(e,n,o,i,s,u,c){return e=r(e,r(r(a(n,o,i),s),c)),r(t(e,u),n)}function l(e,n,o,a,s,u,c){return e=r(e,r(r(i(n,o,a),s),c)),r(t(e,u),n)}function d(e){var t,r=e.length,n=r+8,o=(n-n%64)/64,a=16*(o+1),i=Array(a-1),s=0,u=0;while(u<r)t=(u-u%4)/4,s=u%4*8,i[t]=i[t]|e.charCodeAt(u)<<s,u++;return t=(u-u%4)/4,s=u%4*8,i[t]=i[t]|128<<s,i[a-2]=r<<3,i[a-1]=r>>>29,i}function h(e){var t,r,n="",o="";for(r=0;r<=3;r++)t=e>>>8*r&255,o="0"+t.toString(16),n+=o.substr(o.length-2,2);return n}function p(e){e=e.replace(/\r\n/g,"\n");for(var t="",r=0;r<e.length;r++){var n=e.charCodeAt(r);n<128?t+=String.fromCharCode(n):n>127&&n<2048?(t+=String.fromCharCode(n>>6|192),t+=String.fromCharCode(63&n|128)):(t+=String.fromCharCode(n>>12|224),t+=String.fromCharCode(n>>6&63|128),t+=String.fromCharCode(63&n|128))}return t}var f,g,m,_,v,y,b,w,S,C=Array(),x=7,k=12,A=17,P=22,O=5,U=9,j=14,L=20,E=4,T=11,D=16,z=23,N=6,R=10,B=15,M=21;for(e=p(e),C=d(e),y=1732584193,b=4023233417,w=2562383102,S=271733878,f=0;f<C.length;f+=16)g=y,m=b,_=w,v=S,y=s(y,b,w,S,C[f+0],x,3614090360),S=s(S,y,b,w,C[f+1],k,3905402710),w=s(w,S,y,b,C[f+2],A,606105819),b=s(b,w,S,y,C[f+3],P,3250441966),y=s(y,b,w,S,C[f+4],x,4118548399),S=s(S,y,b,w,C[f+5],k,1200080426),w=s(w,S,y,b,C[f+6],A,2821735955),b=s(b,w,S,y,C[f+7],P,4249261313),y=s(y,b,w,S,C[f+8],x,1770035416),S=s(S,y,b,w,C[f+9],k,2336552879),w=s(w,S,y,b,C[f+10],A,4294925233),b=s(b,w,S,y,C[f+11],P,2304563134),y=s(y,b,w,S,C[f+12],x,1804603682),S=s(S,y,b,w,C[f+13],k,4254626195),w=s(w,S,y,b,C[f+14],A,2792965006),b=s(b,w,S,y,C[f+15],P,1236535329),y=u(y,b,w,S,C[f+1],O,4129170786),S=u(S,y,b,w,C[f+6],U,3225465664),w=u(w,S,y,b,C[f+11],j,643717713),b=u(b,w,S,y,C[f+0],L,3921069994),y=u(y,b,w,S,C[f+5],O,3593408605),S=u(S,y,b,w,C[f+10],U,38016083),w=u(w,S,y,b,C[f+15],j,3634488961),b=u(b,w,S,y,C[f+4],L,3889429448),y=u(y,b,w,S,C[f+9],O,568446438),S=u(S,y,b,w,C[f+14],U,3275163606),w=u(w,S,y,b,C[f+3],j,4107603335),b=u(b,w,S,y,C[f+8],L,1163531501),y=u(y,b,w,S,C[f+13],O,2850285829),S=u(S,y,b,w,C[f+2],U,4243563512),w=u(w,S,y,b,C[f+7],j,1735328473),b=u(b,w,S,y,C[f+12],L,2368359562),y=c(y,b,w,S,C[f+5],E,4294588738),S=c(S,y,b,w,C[f+8],T,2272392833),w=c(w,S,y,b,C[f+11],D,1839030562),b=c(b,w,S,y,C[f+14],z,4259657740),y=c(y,b,w,S,C[f+1],E,2763975236),S=c(S,y,b,w,C[f+4],T,1272893353),w=c(w,S,y,b,C[f+7],D,4139469664),b=c(b,w,S,y,C[f+10],z,3200236656),y=c(y,b,w,S,C[f+13],E,681279174),S=c(S,y,b,w,C[f+0],T,3936430074),w=c(w,S,y,b,C[f+3],D,3572445317),b=c(b,w,S,y,C[f+6],z,76029189),y=c(y,b,w,S,C[f+9],E,3654602809),S=c(S,y,b,w,C[f+12],T,3873151461),w=c(w,S,y,b,C[f+15],D,530742520),b=c(b,w,S,y,C[f+2],z,3299628645),y=l(y,b,w,S,C[f+0],N,4096336452),S=l(S,y,b,w,C[f+7],R,1126891415),w=l(w,S,y,b,C[f+14],B,2878612391),b=l(b,w,S,y,C[f+5],M,4237533241),y=l(y,b,w,S,C[f+12],N,1700485571),S=l(S,y,b,w,C[f+3],R,2399980690),w=l(w,S,y,b,C[f+10],B,4293915773),b=l(b,w,S,y,C[f+1],M,2240044497),y=l(y,b,w,S,C[f+8],N,1873313359),S=l(S,y,b,w,C[f+15],R,4264355552),w=l(w,S,y,b,C[f+6],B,2734768916),b=l(b,w,S,y,C[f+13],M,1309151649),y=l(y,b,w,S,C[f+4],N,4149444226),S=l(S,y,b,w,C[f+11],R,3174756917),w=l(w,S,y,b,C[f+2],B,718787259),b=l(b,w,S,y,C[f+9],M,3951481745),y=r(y,g),b=r(b,m),w=r(w,_),S=r(S,v);return(h(y)+h(b)+h(w)+h(S)).toLowerCase()}var H=r("2106"),I=r.n(H),J=r("00d7"),q=r.n(J);n["default"].use(m.a),n["default"].use(I.a,N),n["default"].use(q.a),n["default"].prototype.pixiv=O,n["default"].prototype.app=P,n["default"].prototype._=j.a,new n["default"]({el:"#app",router:f,render:e=>e(S)}).$mount("#app")},"85ec":function(e,t,r){},"8f66":function(e,t,r){"use strict";r("e8d4")},e8d4:function(e,t,r){}});
//# sourceMappingURL=app.04e79198.js.map